/**
 * polygon-offset v0.3.1
 * Polygon offsetting algorithm, aimed for use with leaflet
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Offset=e()}(this,(function(){"use strict";var t=function(t,e){this.current=t,this.next=e,this._inNormal=this.inwardsNormal(),this._outNormal=this.outwardsNormal()};t.prototype.outwardsNormal=function(){var t=this.inwardsNormal();return[-t[0],-t[1]]},t.prototype.inwardsNormal=function(){var t=this.next[0]-this.current[0],e=this.next[1]-this.current[1],r=Math.sqrt(t*t+e*e);if(0===r)throw new Error("Vertices overlap");return[-e/r,t/r]},t.prototype.offset=function(e,r){return t.offsetEdge(this.current,this.next,e,r)},t.prototype.inverseOffset=function(e,r){return t.offsetEdge(this.next,this.current,e,r)},t.offsetEdge=function(e,r,n,i){return new t([e[0]+n,e[1]+i],[r[0]+n,r[1]+i])},t.prototype.inverse=function(){return new t(this.next,this.current)};var e=0,r=1,n=2,i=3,o=u,s=u;function u(t,e){if(!(this instanceof u))return new u(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||h,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}function h(t,e){return t<e?-1:t>e?1:0}function a(){}function l(t){this._tree=t,this._ancestors=[],this._cursor=null}u.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,r=this.compare,n=e[t];t>0;){var i=t-1>>1,o=e[i];if(r(n,o)>=0)break;e[t]=o,t=i}e[t]=n},_down:function(t){for(var e=this.data,r=this.compare,n=this.length>>1,i=e[t];t<n;){var o=1+(t<<1),s=o+1,u=e[o];if(s<this.length&&r(e[s],u)<0&&(o=s,u=e[s]),r(u,i)>=0)break;e[t]=u,t=o}e[t]=i}},o.default=s,a.prototype.clear=function(){this._root=null,this.size=0},a.prototype.find=function(t){for(var e=this._root;null!==e;){var r=this._comparator(t,e.data);if(0===r)return e.data;e=e.get_child(r>0)}return null},a.prototype.findIter=function(t){for(var e=this._root,r=this.iterator();null!==e;){var n=this._comparator(t,e.data);if(0===n)return r._cursor=e,r;r._ancestors.push(e),e=e.get_child(n>0)}return null},a.prototype.lowerBound=function(t){for(var e=this._root,r=this.iterator(),n=this._comparator;null!==e;){var i=n(t,e.data);if(0===i)return r._cursor=e,r;r._ancestors.push(e),e=e.get_child(i>0)}for(var o=r._ancestors.length-1;o>=0;--o)if(n(t,(e=r._ancestors[o]).data)<0)return r._cursor=e,r._ancestors.length=o,r;return r._ancestors.length=0,r},a.prototype.upperBound=function(t){for(var e=this.lowerBound(t),r=this._comparator;null!==e.data()&&0===r(e.data(),t);)e.next();return e},a.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},a.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},a.prototype.iterator=function(){return new l(this)},a.prototype.each=function(t){for(var e,r=this.iterator();null!==(e=r.next());)if(!1===t(e))return},a.prototype.reach=function(t){for(var e,r=this.iterator();null!==(e=r.prev());)if(!1===t(e))return},l.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},l.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else{var e;if(null===this._cursor.right)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===e);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right)}return null!==this._cursor?this._cursor.data:null},l.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else{var e;if(null===this._cursor.left)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===e);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left)}return null!==this._cursor?this._cursor.data:null},l.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},l.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t};var c=a;function f(t){this.data=t,this.left=null,this.right=null,this.red=!0}function p(t){this._root=null,this._comparator=t,this.size=0}function d(t){return null!==t&&t.red}function v(t,e){var r=t.get_child(!e);return t.set_child(!e,r.get_child(e)),r.set_child(e,t),t.red=!0,r.red=!1,r}function _(t,e){return t.set_child(!e,v(t.get_child(!e),!e)),v(t,e)}f.prototype.get_child=function(t){return t?this.right:this.left},f.prototype.set_child=function(t,e){t?this.right=e:this.left=e},p.prototype=new c,p.prototype.insert=function(t){var e=!1;if(null===this._root)this._root=new f(t),e=!0,this.size++;else{var r=new f(void 0),n=0,i=0,o=null,s=r,u=null,h=this._root;for(s.right=this._root;;){if(null===h?(h=new f(t),u.set_child(n,h),e=!0,this.size++):d(h.left)&&d(h.right)&&(h.red=!0,h.left.red=!1,h.right.red=!1),d(h)&&d(u)){var a=s.right===o;h===u.get_child(i)?s.set_child(a,v(o,!i)):s.set_child(a,_(o,!i))}var l=this._comparator(h.data,t);if(0===l)break;i=n,n=l<0,null!==o&&(s=o),o=u,u=h,h=h.get_child(n)}this._root=r.right}return this._root.red=!1,e},p.prototype.remove=function(t){if(null===this._root)return!1;var e=new f(void 0),r=e;r.right=this._root;for(var n=null,i=null,o=null,s=1;null!==r.get_child(s);){var u=s;i=n,n=r,r=r.get_child(s);var h=this._comparator(t,r.data);if(s=h>0,0===h&&(o=r),!d(r)&&!d(r.get_child(s)))if(d(r.get_child(!s))){var a=v(r,s);n.set_child(u,a),n=a}else if(!d(r.get_child(!s))){var l=n.get_child(!u);if(null!==l)if(d(l.get_child(!u))||d(l.get_child(u))){var c=i.right===n;d(l.get_child(u))?i.set_child(c,_(n,u)):d(l.get_child(!u))&&i.set_child(c,v(n,u));var p=i.get_child(c);p.red=!0,r.red=!0,p.left.red=!1,p.right.red=!1}else n.red=!1,l.red=!0,r.red=!0}}return null!==o&&(o.data=r.data,n.set_child(n.right===r,r.get_child(null===r.left)),this.size--),this._root=e.right,null!==this._root&&(this._root.red=!1),null!==o};var g=p;function m(t){this.data=t,this.left=null,this.right=null}function y(t){this._root=null,this._comparator=t,this.size=0}m.prototype.get_child=function(t){return t?this.right:this.left},m.prototype.set_child=function(t,e){t?this.right=e:this.left=e},y.prototype=new c,y.prototype.insert=function(t){if(null===this._root)return this._root=new m(t),this.size++,!0;for(var e=0,r=null,n=this._root;;){if(null===n)return n=new m(t),r.set_child(e,n),ret=!0,this.size++,!0;if(0===this._comparator(n.data,t))return!1;e=this._comparator(n.data,t)<0,r=n,n=n.get_child(e)}},y.prototype.remove=function(t){if(null===this._root)return!1;var e=new m(void 0),r=e;r.right=this._root;for(var n=null,i=null,o=1;null!==r.get_child(o);){n=r,r=r.get_child(o);var s=this._comparator(t,r.data);o=s>0,0===s&&(i=r)}return null!==i&&(i.data=r.data,n.set_child(n.right===r,r.get_child(null===r.left)),this._root=e.right,this.size--,!0)};var E={RBTree:g,BinTree:y},w=function(t,e,r){return(t[0]-r[0])*(e[1]-r[1])-(e[0]-r[0])*(t[1]-r[1])};function I(t,r,n,i,o){this.left=r,this.point=t,this.otherEvent=n,this.isSubject=i,this.type=o||e,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.inResult=!1,this.resultInOut=!1}I.prototype={isBelow:function(t){return this.left?w(this.point,this.otherEvent.point,t)>0:w(this.otherEvent.point,this.point,t)>0},isAbove:function(t){return!this.isBelow(t)},isVertical:function(){return this.point[0]===this.otherEvent.point[0]}};var b=I,O=function(t,e){var r=t.point,n=e.point;return r[0]>n[0]?1:r[0]<n[0]?-1:r[1]!==n[1]?r[1]>n[1]?1:-1:function(t,e,r,n){if(t.left!==e.left)return t.left?1:-1;if(0!==w(r,t.otherEvent.point,e.otherEvent.point))return t.isBelow(e.otherEvent.point)?-1:1;return!t.isSubject&&e.isSubject?1:-1}(t,e,r)};var x=function(t,e){return t[0]===e[0]&&t[1]===e[1]},S=function(t,e){return t===e?0:0!==w(t.point,t.otherEvent.point,e.point)||0!==w(t.point,t.otherEvent.point,e.otherEvent.point)?x(t.point,e.point)?t.isBelow(e.otherEvent.point)?-1:1:t.point[0]===e.point[0]?t.point[1]<e.point[1]?-1:1:1===O(t,e)?e.isAbove(t.point)?-1:1:t.isBelow(e.point)?-1:1:t.isSubject!==e.isSubject?t.isSubject?-1:1:x(t.point,e.point)?x(t.otherEvent.point,e.otherEvent.point)?0:t.contourId>e.contourId?1:-1:1===O(t,e)?1:-1};function N(t,e){return t[0]*e[1]-t[1]*e[0]}function j(t,e){return t[0]*e[0]+t[1]*e[1]}var R=[],M=E.RBTree,k=Math.max,C=Math.min;function B(t,e,r,n,i,o){var s=new b(t,!1,void 0,r),u=new b(e,!1,s,r);s.otherEvent=u,s.contourId=u.contourId=n,O(s,u)>0?u.left=!0:s.left=!0,o[0]=C(o[0],t[0]),o[1]=C(o[1],t[1]),o[2]=k(o[2],t[0]),o[3]=k(o[3],t[1]),i.push(s),i.push(u)}var L=0;function P(t,e,r,n,i){var o,s;if("number"==typeof t[0][0])for(o=0,s=t.length-1;o<s;o++)B(t[o],t[o+1],e,r+1,n,i);else for(o=0,s=t.length;o<s;o++)L++,P(t[o],e,L,n,i)}function z(t,e,r,n){var i=new o(null,O);return L=0,P(t,!0,0,i,r),P(e,!1,0,i,n),i}function A(t,e,r,n){null===e?(t.inOut=!1,t.otherInOut=!0):t.isSubject===e.isSubject?(t.inOut=!e.inOut,t.otherInOut=e.otherInOut):(t.inOut=!e.otherInOut,t.otherInOut=e.isVertical()?!e.inOut:e.inOut),e&&(t.prevInResult=!T(e,n)||e.isVertical()?e.prevInResult:e),t.inResult=T(t,n)}function T(t,o){switch(t.type){case e:switch(o){case 0:return!t.otherInOut;case 1:return t.otherInOut;case 2:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case 3:return!0}case n:return 0===o||1===o;case i:return 2===o;case r:return!1}return!1}function V(t,e,o){var s=function(t,e,r,n,i){var o=[e[0]-t[0],e[1]-t[1]],s=[n[0]-r[0],n[1]-r[1]];function u(t,e,r){return[t[0]+e*r[0],t[1]+e*r[1]]}var h=[r[0]-t[0],r[1]-t[1]],a=N(o,s),l=a*a,c=j(o,o);if(l>1e-9*c*j(s,s)){var f=N(h,s)/a;if(f<0||f>1)return null;var p=N(h,o)/a;return p<0||p>1?null:i?null:[u(t,f,o)]}var d=j(h,h);if((l=(a=N(h,o))*a)>1e-9*c*d)return null;var v=j(o,h)/c,_=v+j(o,s)/c,g=Math.min(v,_),m=Math.max(v,_);return g<=1&&m>=0?1===g?i?null:[u(t,g>0?g:0,o)]:0===m?i?null:[u(t,m<1?m:1,o)]:i&&0===g&&1===m?null:[u(t,g>0?g:0,o),u(t,m<1?m:1,o)]:null}(t.point,t.otherEvent.point,e.point,e.otherEvent.point),u=s?s.length:0;if(0===u)return 0;if(1===u&&(x(t.point,e.point)||x(t.otherEvent.point,e.otherEvent.point)))return 0;if(2===u&&t.isSubject===e.isSubject)return t.contourId===e.contourId&&console.warn("Edges of the same polygon overlap",t.point,t.otherEvent.point,e.point,e.otherEvent.point),0;if(1===u)return x(t.point,s[0])||x(t.otherEvent.point,s[0])||F(t,s[0],o),x(e.point,s[0])||x(e.otherEvent.point,s[0])||F(e,s[0],o),1;var h=[],a=!1,l=!1;return x(t.point,e.point)?a=!0:1===O(t,e)?h.push(e,t):h.push(t,e),x(t.otherEvent.point,e.otherEvent.point)?l=!0:1===O(t.otherEvent,e.otherEvent)?h.push(e.otherEvent,t.otherEvent):h.push(t.otherEvent,e.otherEvent),a&&l||a?(t.type=r,e.type=t.inOut===e.inOut?n:i,a&&!l&&F(h[0].otherEvent,h[1].point,o),2):l?(F(h[0],h[1].point,o),3):h[0]!==h[3].otherEvent?(F(h[0],h[1].point,o),F(h[1],h[2].point,o),3):(F(h[0],h[1].point,o),F(h[3].otherEvent,h[2].point,o),3)}function F(t,e,r){var n=new b(e,!1,t,t.isSubject),i=new b(e,!0,t.otherEvent,t.isSubject);return x(t.point,t.otherEvent.point)&&console.warn("what is that?",t),n.contourId=i.contourId=t.contourId,O(i,t.otherEvent)>0&&(t.otherEvent.left=!0,i.left=!1),t.otherEvent.otherEvent=i,t.otherEvent=n,r.push(i),r.push(n),r}function q(t,e,r,n,i,o){for(var s,u,h=[],a=new M(S),l=(h=[],C(n[2],i[2]));t.length;){var c=t.pop();if(h.push(c),0===o&&c.point[0]>l||2===o&&c.point[0]>n[2])break;if(c.left){if(a.insert(c),u=a.findIter(c),s=a.findIter(c),c.iterator=a.findIter(c),!s||!u){console.log("brute");var f=U(a);s=f[0],u=f[1]}if(s.data()!==a.min()?s.prev():((s=a.iterator()).prev(),s.next()),u.next(),A(c,s.data(),0,o),u.data()&&2===V(c,u.data(),t)&&(A(c,s.data(),0,o),A(c,u.data(),0,o)),s.data()&&2===V(s.data(),c,t)){var p=a.findIter(s.data());p.data()!==a.min()?p.prev():(p=a.findIter(a.max())).next(),A(s.data(),p.data(),0,o),A(c,s.data(),0,o)}}else{if(c=c.otherEvent,u=a.findIter(c),!(s=a.findIter(c))||!u)continue;s.data()!==a.min()?s.prev():((s=a.iterator()).prev(),s.next()),u.next(),a.remove(c),u.data()&&s.data()&&V(s.data(),u.data(),t)}}return h}function U(t,e){for(var r,n=t.iterator(),i=t.iterator(),o=t.iterator();null!==(r=o.next())&&(n.next(),i.next(),r!==event););return[n,i]}function D(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Q(t){return t.reverse()}function X(t){return"[object Array]"===Object.prototype.toString.call(t)}function G(t,e){return X(t[0])&&!X(t[0][0])&&(t=[t]),t[e]=[],t}function H(t){var e,r,n=function(t){var e,r,n,i=[];for(r=0,n=t.length;r<n;r++)((e=t[r]).left&&e.inResult||!e.left&&e.otherEvent.inResult)&&i.push(e);for(var o=!1;!o;)for(o=!0,r=0,n=i.length;r<n;r++)r+1<n&&1===O(i[r],i[r+1])&&(D(i,r,r+1),o=!1);for(r=0,n=i.length;r<n;r++)i[r].pos=r;for(r=0,n=i.length;r<n;r++)if(!i[r].left){var s=i[r].pos;i[r].pos=i[r].otherEvent.pos,i[r].otherEvent.pos=s}return i}(t),i=Array(n.length),o=[],s=[],u=[],h={};for(e=0,r=n.length;e<r;e++)if(!i[e]){var a=[];o.push(a);var l=o.length-1;if(s.push(0),u.push(-1),n[e].prevInResult){var c=n[e].prevInResult.contourId;n[e].prevInResult.resultInOut?h[c]&&(G(o[u[c]],l),u[l]=u[c],s[l]=s[c],h[l]=!0):(G(o[c],l),u[l]=c,s[l]=s[c]+1,h[l]=!0)}var f=e,p=n[e].point;for(a.push(p);f>=e;)i[f]=!0,n[f].left?(n[f].resultInOut=!1,n[f].contourId=l):(n[f].otherEvent.resultInOut=!0,n[f].otherEvent.contourId=l),i[f=n[f].pos]=!0,a.push(n[f].point),f=J(f,n,i);i[f=-1===f?e:f]=i[n[f].pos]=!0,n[f].otherEvent.resultInOut=!0,n[f].otherEvent.contourId=l,1&s[l]&&Q(a)}return o}function J(t,e,r){for(var n=t+1,i=e.length;n<i&&x(e[n].point,e[t].point);){if(!r[n])return n;n+=1}for(n=t-1;r[n];)n-=1;return n}function K(t,e,r){var n=function(t,e,r){var n=null;return t.length*e.length==0&&(0===r?n=R:2===r?n=t:1!==r&&3!==r||(n=0===t.length?e:t)),n}(t,e,r);if(n)return n===R?null:n;var i=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],s=z(t,e,i,o);return(n=function(t,e,r,n,i){var o=null;return(r[0]>n[2]||n[0]>r[2]||r[1]>n[3]||n[1]>r[3])&&(0===i?o=R:2===i?o=t:1!==i&&3!==i||(o=t.concat(e))),o}(t,e,i,o,r))?n===R?null:n:H(q(s,0,0,i,o,r))}var W=K,Y={INTERSECTION:0,DIFFERENCE:2,UNION:1,XOR:3},Z=z,$=A,tt=q,et=F,rt=V;W.union=function(t,e){return K(t,e,1)},W.diff=function(t,e){return K(t,e,2)},W.xor=function(t,e){return K(t,e,3)},W.intersection=function(t,e){return K(t,e,0)},W.operations=Y,W.fillQueue=Z,W.computeFields=$,W.subdivideSegments=tt,W.divideSegment=et,W.possibleIntersection=rt;var nt=W,it=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},ot=function(t){return it(t)&&t.length};function st(t,e){return t[0]===e[0]&&t[1]===e[1]}function ut(t,e,r){var n,i;if(e=e||0,ot(t)&&"number"==typeof t[0][0]){var o=0,s=t;for(n=0,i=s.length;n<i;n++){var u=s[n],h=s[(n+1)%i];o+=u[0]*h[1],o-=h[0]*u[1]}(!r&&o>0||r&&o<0)&&s.reverse()}else for(n=0,i=t.length;n<i;n++)ut(t[n],e+1,n>0);if(0===e&&ot(t)&&ot(t[0])&&"number"==typeof t[0][0][0]){var a=t[0].slice(0,1)[0];t[0].pop(),t[0].push([a[0],a[1]])}return t}console.log(nt.union);var ht=function(t,e){void 0===e&&(e=5),this.vertices=null,this.edges=null,this._closed=!1,this._distance=0,t&&this.data(t),this._arcSegments=e};return ht.prototype.data=function(t){if(this._edges=[],!it(t))throw new Error("Offset requires at least one coodinate to work with");return it(t)&&"number"==typeof t[0]?this.vertices=t:(this.vertices=ut(t),this._processContour(this.vertices,this._edges)),this},ht.prototype._processContour=function(e,r){var n,i;if(it(e[0])&&"number"==typeof e[0][0])for(i=e.length,st(e[0],e[i-1])&&(i-=1),n=0;n<i;n++)r.push(new t(e[n],e[(n+1)%i]));else for(n=0,i=e.length;n<i;n++)r.push([]),this._processContour(e[n],r[r.length-1])},ht.prototype.arcSegments=function(t){return this._arcSegments=t,this},ht.prototype.validate=function(t){var e=t.length;return"number"==typeof t[0]?[t]:(t[0][0]===t[e-1][0]&&t[0][1]===t[e-1][1]&&e>1&&(t=t.slice(0,e-1),this._closed=!0),t)},ht.prototype.createArc=function(t,e,r,n,i,o,s){var u=2*Math.PI,h=Math.atan2(n[1]-e[1],n[0]-e[0]),a=Math.atan2(i[1]-e[1],i[0]-e[0]);o%2==0&&(o-=1),h<0&&(h+=u),a<0&&(a+=u);var l=h>a?h-a:h+u-a,c=(s?-l:u-l)/o;t.push(n);for(var f=1;f<o;++f)l=h+c*f,t.push([e[0]+Math.cos(l)*r,e[1]+Math.sin(l)*r]);return t.push(i),t},ht.prototype.distance=function(t,e){return this._distance=t||0,this},ht.degreesToUnits=function(t,e){switch(e){case"miles":t/=69.047;break;case"feet":t/=364568;break;case"kilometers":t/=111.12;break;case"meters":case"metres":t/=111120}return t},ht.prototype.ensureLastPoint=function(t){return st(t[0],t[t.length-1])||t.push([t[0][0],t[0][1]]),t},ht.prototype.offset=function(t){return this.distance(t),0===this._distance?this.vertices:this._distance>0?this.margin(this._distance):this.padding(-this._distance)},ht.prototype._offsetSegment=function(t,e,r,n){for(var i=[],o=[r.offset(r._inNormal[0]*n,r._inNormal[1]*n),r.inverseOffset(r._outNormal[0]*n,r._outNormal[1]*n)],s=0;s<2;s++){var u=o[s],h=o[(s+2-1)%2];this.createArc(i,0===s?t:e,n,h.next,u.current,this._arcSegments,!0)}return i},ht.prototype.margin=function(t){if(this.distance(t),"number"==typeof this.vertices[0])return this.offsetPoint(this._distance);if(0===t)return this.vertices;var e=this.offsetLines(this._distance);return ut(e=nt.union(this.vertices,e))},ht.prototype.padding=function(t){if(this.distance(t),0===this._distance)return this.ensureLastPoint(this.vertices);if(2===this.vertices.length&&"number"==typeof this.vertices[0])return this.vertices;var e=this.offsetLines(this._distance);return ut(nt.diff(this.vertices,e))},ht.prototype.offsetLine=function(t){return 0===t?this.vertices:ut(this.offsetLines(t))},ht.prototype.offsetLines=function(t){if(t<0)throw new Error("Cannot apply negative margin to the line");var e;if(this.distance(t),it(this.vertices[0])&&"number"!=typeof this.vertices[0][0])for(var r=0,n=this._edges.length;r<n;r++)e=0===r?this.offsetContour(this.vertices[r],this._edges[r]):nt.union(e,this.offsetContour(this.vertices[r],this._edges[r]));else e=1===this.vertices.length?this.offsetPoint():this.offsetContour(this.vertices,this._edges);return e},ht.prototype.offsetContour=function(t,e){var r,n,i;if(it(t[0])&&"number"==typeof t[0][0])for(n=0,i=t.length-1;n<i;n++){var o=this.ensureLastPoint(this._offsetSegment(t[n],t[n+1],e[n],this._distance));r=0===n?[this.ensureLastPoint(o)]:nt.union(r,this.ensureLastPoint(o))}else for(n=0,i=e.length;n<i;n++)r=0===n?this.offsetContour(t[n],e[n]):nt.union(r,this.offsetContour(t[n],e[n]));return r},ht.prototype.offsetPoint=function(t){this.distance(t);var e=2*this._arcSegments,r=[],n=this.vertices,i=this._distance,o=0;e%2==0&&e++;for(var s=0;s<e;s++)o+=2*Math.PI/e,r.push([n[0]+i*Math.cos(o),n[1]+i*Math.sin(o)]);return ut([this.ensureLastPoint(r)])},ht.orientRings=ut,ht}));
//# sourceMappingURL=polygon-offset.min.js.map
